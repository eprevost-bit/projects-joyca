<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_saleorder_custom" inherit_id="sale.report_saleorder_document">
        <xpath expr="//t[@t-call='web.external_layout']/div[@class='page']" position="replace">
            <div class="page">
                <div class="container" style="margin-top: 0px;">
                    <div class="row">
                        <div class="col-12">
                            <table class="table table-bordered" style="border-collapse: collapse;">
                                <thead>
                                    <tr style="background-color: #c1c2c3; font-size: 0.9rem; font: small-caption;">
                                        <th class="text-center"
                                            style="border-left: 2.5px solid black; border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black">
                                            <strong>FECHA</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>PRESUPUESTO</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>PÁG.</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="font-size: 0.8rem;">
                                        <td class="text-center"
                                            style="border-left: 2.5px solid black; border-right: 2.5px solid black; border-bottom: 2.5px solid black">
                                            <span t-field="doc.date_order" t-options='{"format": "dd/MM/yy"}'/>
                                        </td>
                                        <td class="text-center"
                                            style="border-left: 2.5px solid black; border-right: 2.5px solid black; border-bottom: 2.5px solid black">
                                            <span t-field="doc.name"/>
                                        </td>
                                        <td class="text-center"
                                            style="border-left: 2.5px solid black; border-right: 2.5px solid black; border-bottom: 2.5px solid black">
                                            <span class="page"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mb-1"
                         style="margin-top: 15px; border: 2.5px solid #333; background-color: #c1c2c3; padding: 5px 0px 5px 0px; align-items: end;">
                        <div class="col-8" style="font-size: 0.8rem; text-align: left;">
                            <strong>DESCRIPCIÓN</strong>
                        </div>
                        <div class="col-1 text-center" style="font-size: 0.8rem; text-align: right;">
                            <strong>UD.</strong>
                        </div>
                        <div class="col-1 text-right" style="font-size: 0.8rem; text-align: right;">
                            <strong>PRECIO UD.</strong>
                        </div>
                        <div class="col-2 text-right" style="font-size: 0.8rem; text-align: right;">
                            <strong>IMPORTE</strong>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-12" style="font-size: 0.8rem;">
                            <strong>*-
                                <span t-field="doc.partner_id"/>
                                - V1
                            </strong>
                        </div>
                    </div>

                    <t t-foreach="doc.order_line" t-as="l">
                        <div class="row">
                            <div class="col-8" style="font-size: 0.8rem; text-align: left;">
                                <span t-field="l.name"/>
                            </div>
                            <div class="col-1 text-right" style="font-size: 0.8rem; text-align: right;">
                                <span t-field="l.product_uom_qty"/>
                            </div>
                            <div class="col-1 text-right" style="font-size: 0.8rem; text-align: right;">
                                <span t-field="l.price_unit"/>
                            </div>
                            <div class="col-2 text-right" style="font-size: 0.8rem; text-align: right;">
                                <span t-field="l.price_subtotal"/>
                            </div>
                        </div>
                    </t>

                    <div class="row justify-content-end" style="margin-top: 150px;">
                        <div class="col-12">
                            <table class="table table-bordered" style="font-size: 0.9rem;">
                                <thead>
                                    <tr style="background-color: #c1c2c3;">
                                        <th class="text-center"
                                            style="border-left: 2.5px solid black; border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black">
                                            <strong>TOTAL IMP.</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>%</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>IMPORTE</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>BASE</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>%</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: none; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>IVA</strong>
                                        </th>
                                        <th class="text-center"
                                            style="border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: none">
                                            <strong>TOTAL</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr style="background-color: unset;">
                                        <td class="text-center"
                                            style="background-color: unset !important; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                        <td style="background-color: unset ; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td style="background-color: unset; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td class="text-center"
                                            style="background-color: unset; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: none; border-left: 2.5px solid black">
                                            <span t-field="doc.amount_untaxed"/>
                                        </td>
                                        <td class="text-center"
                                            style="background-color: unset; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: none; border-left: 2.5px solid black">
                                            <t t-set="tax_name"
                                               t-value="', '.join(l.tax_id.mapped('name')) if doc.order_line else ''"/>
                                            <span t-esc="tax_name.split(',')[0] if tax_name else ''"/>
                                        </td>
                                        <td class="text-center"
                                            style="background-color: unset; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: none; border-left: 2.5px solid black">
                                            <span t-field="doc.amount_tax"/>
                                        </td>
                                        <td class="text-center" rowspan="2"
                                            style="background-color: unset !important; vertical-align: middle; border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black">
                                            <strong>
                                                <span t-field="doc.amount_total"/>
                                            </strong>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td style="border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td style="border-right: 2.5px solid black; border-top: 2.5px solid black; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td style="border-right: 2.5px solid black; border-top: none; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td style="border-right: 2.5px solid black; border-top: none; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                        <td style="border-right: 2.5px solid black; border-top: none; border-bottom: 2.5px solid black; border-left: 2.5px solid black"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-12">
                            <strong>Forma pago:</strong>
                            50% Firma 30% Antes de montaje 20% finalización
                        </div>
                    </div>

                    <div class="row mt-4" style="font-size: 8px;">
                        <div class="col-12">
                            <p>La información contenida en este mensaje y/o archivo(s) adjunto(s), enviada desde
                                PROYECTOS JOYCA SL, es confidencial/privilegiada y está destinada a ser leída sólo por
                                la(s) persona(s) a la(s) que va dirigida. Le recordamos que sus datos han sido
                                incorporados en el sistema de tratamiento de PROYECTOS JOYCA SL y que siempre y cuando
                                se cumplan los requisitos exigidos por la normativa, usted podrá ejercer sus derechos de
                                acceso, rectificación, limitación de tratamiento, supresión y derecho al olvido(?),
                                portabilidad, oposición y revocación, en los términos que establece la normativa vigente
                                y aplicable en materia de protección de datos, dirigiendo su petición al dirección
                                postal CALLE INDUSTRIA$ 4.28850. TORREJON DE ARDOZ (MADRID) o bien a través de correo
                                electrónico info@proyectosjoyca.es Si usted lee este mensaje y no es el
                                destinatario señalado, el empleado o el agente responsable de entregar el mensaje al
                                destinatario, o ha recibido esta comunicación por error, le informamos que esta
                                totalmente prohibida, y puede ser ilegal, cualquier divulgación, distribución o
                                reproducción de esta comunicación, y le rogamos que nos lo notifique inmediatamente y
                                nos
                                devuelve el mensaje original a la dirección arriba mencionada.
                            </p>
                            <p>Proyectos Joyca S.L. Reg. Merc. de Madrid, Tomo 25.532, Folio 120, Sección 8, Hoja
                                M-460076 Inscripción 1, C.I.F. B-85422640
                            </p>
                        </div>
                    </div>

                </div>
                <t t-if="doc.note and doc.note.strip()">
                    <div class="page" style="page-break-before: always; position: relative; min-height: 100vh; border: 1.5px solid #d99d69">
                        <div style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background-image: url('/web/image?model=res.company&amp;id=1&amp;field=x_studio_img');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size: 70%;
                        opacity: 0.001;
                        z-index: -1;
                    "/>
                        <div style="position: relative; z-index: 1; padding: 100px;">
                            <p t-field="doc.note"/>
                        </div>
                    </div>
                </t>
                <t t-if="doc.x_studio_condiciones and doc.x_studio_condiciones.strip()">
                    <div class="page" style="page-break-before: always; position: relative; min-height: 100vh; border: 1.5px solid #d99d69">
                        <div style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background-image: url('/web/image?model=res.company&amp;id=1&amp;field=x_studio_img');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size: 70%;
                        opacity: 0.001;
                        z-index: -99999;
                    "/>
                        <div style="position: relative; z-index: 1; padding: 100px;">
                            <p t-field="doc.x_studio_condiciones"/>
                        </div>
                    </div>
                </t>
            </div>
        </xpath>
    </template>

</odoo>